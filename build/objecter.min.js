define(["jquery","underscore"],function(r,n){function e(n,e,o){if(1==arguments.length)return n?function(){return 0==arguments.length?n:r.D.sure.apply(null,[n].concat(Array.prototype.slice.call(arguments,0)))}:null;if(r.isPlainObject(e)){var i=e.error;e=e.name}var a=t(n,e,!1);return!a&&i?i(n,e,u(n,e)):2==arguments.length?n[a]:n[a]=o}function t(n,e,o){if(!n)throw new Error("Object is empty");if(1==arguments.length)return function(e){return 0==arguments.length?r.map(n,function(r,n){return n}):t(n,e)};if(e=e?e.toLowerCase():e)for(var i in n)if(i.toLowerCase()==e)return i;if(o)throw new Error(u(n,e));return!1}function u(r,n){return"Property ["+n+"] not found in "+(JSON.prune?JSON.prune(r,1,10):JSON.stringify(r))}return{sure:e}});