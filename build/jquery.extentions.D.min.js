!function(){function e(e,t,r){function n(e){return"string"==typeof e&&e.match(/\/Date\(([0-9]+)(?:.*)\)\//)}function i(e){if(null===e||void 0===e||""==e)return null;if(t.D.isDate(e))return e;switch(typeof e){case L:var r=e.match(/\/Date\(([0-9]+)(?:.*)\)\//),n=r?new Date(parseInt(r[1])):0/0;if(!isNaN(n))return n.addMinutes(n.getTimezoneOffset());var i=new Date(e);return isNaN(i)&&(i=t.D.parseISO8601Date(e)),isNaN(i)?alert("["+e+"] is not a date."):i;case q:return new Date(e)}return null}function a(e){for(var r=0;r<e.length;r++)t.each(e[r],function(n,i){t.D.isDate(i)&&(e[r][n]=i.addMinutes(i.getTimezoneOffset()))});return e}function o(e){var t=/^([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})$/gi;return t.test(e)?e.replace(t,"guid'$1'"):null}function s(e){var t=new Date(e);return t.addMinutes(-t.getTimezoneOffset())}function u(t,r){return r||(t=s(t)),"datetime'"+e.utils.stringifyJson(t).replace(/"/g,"")+"'"}function c(r){function n(){return t.parseJSON(localStorage.layout||"{}")}function i(e){return j+":"+e}t.fn.extend({LO:function(){var e=this.eq(0);return i(e.attr("lo")||e.prev().text().replace(/[^a-z0-9]/gi,"")+"Layout")},isVisible:function(){return"none"!==this.eq(0).css("display")}});var a=this;this.tags=n()||{},this.add=function(n){var i=t(n).LO();if(i){a.tags[i]={isVisible:t(n).isVisible()};var o=e.utils.stringifyJson(a.tags);localStorage.layout=o,r&&r(i,a.tags)}},this.setLayout=function(e,r){var n=t(e),i=n.LO();if(i){var o=a.tags[i];o&&(o.isVisible?n.show():n.hide(),r&&r(e))}}}function l(e,r,n){return this instanceof l?(this.isGuid=!1,2==arguments.length&&t.isFunction(e)&&(n=e(r),e.isGuid&&(this.isGuid=e.isGuid()),r="eq",e=e()),this.field=e,this.operand=r,void(this.value=t.D.odataParam(n))):3==arguments.length?new l(e,r,n):new l(e,r)}function f(e){this.isGuid=!0,this.toString=function(){return e}}function d(){function n(e){return j+":"+e}function i(){try{return t.parseJSON(localStorage.userSettings)}catch(e){return null}}function a(){localStorage.userSettings=e.utils.stringifyJson(s)}var o=this,s=i()||{};r.isObject(s)||(s={}),this.get=r.wrap(function(e,t){return void 0===s[e]?t:s[e]},function(e,t,r){return e(n(t),r)}),this.set=r.wrap(function(e,r){return 1==arguments.length&&"string"!=typeof e?t.isArray(e)?t.each(e,function(e,t){o.set(t)}):t.each(e||{},function(e,t){o.set(e,t)}):(s[e]=r,a(),o["get_"+e]=function(){return s[e]}),o},function(e,i,a){if("string"==typeof i&&3==arguments.length)return e(n(i),a);if(t.isPlainObject(i)&&2==arguments.length){var s=r.map(i,function(e,t){return[n(t),e]});return s.forEach(function(t){e.apply(o,t)}),o}if(t.isArray(i)&&2==arguments.length)return i.forEach(function(r){if(!t.inArray(r)||2!=r.length)throw Error("UserSettingsBag: wrong arguments.");e(n(r[0]),r[1])}),o;throw Error("UserSettingsBag: wrong arguments.")})}function p(e){var t=e||"_",r=0;this.newId=function(e){return(e||t)+r++}}function g(r){function n(){t.each(s,function(e,t){a(t)})}function i(e,n){var i="function"==typeof __BASE_URL__&&__BASE_URL__()||"",u='<div id="divLoader" style="position:absolute;top:45%;left:45%;border-style:dotted;border-color:Gray;border-width:1px;padding:1px 10px;background-color:White;z-index:10000;cursor:pointer;display:none"><span></span><img src="'+i+'images/LoaderLongFadingLines.gif" style="vertical-align:middle" alt="Loading..." />';r||0!=t("#divLoader").length||(r=t(u).appendTo("BODY"));var c=t(r||"#divLoader").clone().appendTo(n||"BODY").center();return c.draggable().click(function(){a(t(this))}),setTimeout(function(){c.animate({top:"+=100"},{duration:3e3,queue:!0})},0),s.push(c),c.find("SPAN").text(e),c.fadeIn("slow","swing"),c.destroy=function(e){return o.hide(this,e),o},c}function a(r,n){r&&(e.utils.arrayRemoveItem(s,r),r.fadeOut(1500,"swing",function(){t(this).remove()}),n&&(n.fadingMessage&&t.D.fadingMessage(n.fadingMessage),n.successMessage&&t.D.successMessage(n.successMessage)))}var o=this,s=[];this.show=i,this.hide=a,this.hideAll=n}function h(){var e={};this.push=function(t,r){return t+="",e[t]||(e[t]=[]),e[t].push(r),r},this.load=function(e,r){this.push(e+"",t(r)).D().loadTmpl(e+"")},this.shift=function(r){r+="";var n=t.D.prop(e,r);return n&&n.length?n.shift():alert("There is no load parent with name "+r)}}function m(e){function r(e){return e.hasOwnProperty("parent")&&e.hasOwnProperty("uid")&&e.hasOwnProperty("value")}function n(e,n){try{t.each(n.getFieldNames(),function(t,n){var i=e[this];i&&r(i)&&(e[this]=e[this].value)})}catch(i){t.D.fadingMessage(i+"")}}function i(e){return t.each(e.getFieldNames(),function(t,r){var n=e.field(r).memberDefinition;$data.Guid==n.dataType&&n.required&&(e.defaultValues[r]=n.defaultValue=function(){return $data.createGuid()})}),e}t.each(e.context,function(a,o){this instanceof $data.EntitySet&&(this[this.name].addEventListener("beforeUpdate",function(e,n,i){t.each(n.changedProperties,function(){var e=n[this.name];r(e)&&(n[this.name]=e.value)})}),this[this.name].addEventListener("beforeCreate",function(e,t,r){n(t,this)}),i(e[this.elementType.name]))})}function v(e,r,n,i){return t.isArray(r)?void t.each(r,function(t,r){v(e,this,n,i)}):(e instanceof $data.Queryable&&(e=e.defaultType),r=e.field?e.field(r):e.elementType.field(r),arguments.length<4?r.memberDefinition[n]:(r.memberDefinition[n]=i,r))}function y(e,n,i){if(!e)throw new Error("Object is empty");if(1==arguments.length)return function(r){return 0==arguments.length?t.map(e,function(e,t){return t}):t.D.name(e,r)};if(n=n?n.toLowerCase():n)for(var a in e)if(a.toLowerCase()==n)return a;if(!i||!r.isBoolean(i))throw new Error("Property ["+n+"] not found in "+(JSON.prune?JSON.prune(e,1,10):JSON.stringify(e)));return!1}function D(){function e(e,t){if(e=e.toLowerCase(),document.styleSheets)for(var r=0;r<document.styleSheets.length;r++){var n=document.styleSheets[r],i=0,a=!1;do{if(a=n.cssRules?n.cssRules[i]:(n.rules||[])[i],a&&a.selectorText.toLowerCase()==e)return"delete"==t?(n.cssRules?n.deleteRule(i):n.removeRule(i),!0):a;i++}while(a)}return!1}this.getCSSRule=e}function b(e,r,n){var i=function(e,t,i,a){t?r():n&&n()};t.prompt(e,{buttons:{OK:!0,Cancel:!1},callback:i,submit:i})}function x(e){var t;try{if(t=Date.parse(e+"+0000"),isNaN(t))throw""}catch(r){try{t=Date.parse(e)}catch(r){return alert("["+e+"] is not supported format")}}return new Date(t)}function w(e){if("string"!=typeof e)return{label:e,href:""};var t=(e||"").match(/\{(.+?)?\}(.*)/),r=t&&t[1]||e,n=t&&t[2]||t&&t[1]||e;return{label:r,href:n}}function O(e){function r(e,r){var n=i.createElement(e);r.forEach(function(e){t(n).attr(e.name,e.value)}),i.documentElement.appendChild(n)}function n(){return(new XMLSerializer).serializeToString(i)}var i=t.parseXML("<"+e+"/>");return{doc:i,addXmlNode:r,toString:n}}function T(e,r,n){function i(e,t){return e.length=0,e.push.apply(e,t),e}return e.toArray(function(e){var t=r;i(t,S(e,n))}).fail(function(e,r){t.D.makeErrorDialog(e)})}function S(e,n,i,a){var o={text:"Select ...",value:"",isLookUp:!0},s="text",u="value";i&&(u=n,s=i,n=null);var c=t.map(e,function(e){return t.extend(n?n(e):{text:(t.D.sure(e,s)||"").replace(/#/g,"\\#"),value:((t.D.sure(e,u)||"")+"").replace(/#/g,"\\#")},{isLookUp:!0})});return a!==!1&&(c=r.sortBy(c,function(e){return e.text.toUpperCase()})),[o].concat(c)}var E,L="string",q="number";!function(){var e,t=/\+/g,r=/([^&=]+)=?([^&]*)/g,n=function(e){return decodeURIComponent(e.replace(t," "))},i=window.location.search.substring(1);for(E={};e=r.exec(i);)E[n(e[1])]=n(e[2])}(),l.prototype.toString=function(){return this.field+" "+this.operand+" "+(this.isGuid?"guid":"")+this.value};var j=t("html head").find("title").text();t.extend(!0,{D:{}});var C={xmlDocument:O,parseMetaUrl:w,urlParams:function(e,r){if(0===arguments.length)return E;r=r||{},t.isPlainObject(r)||(r={"default":r}),e=y(E,e,!0);var n=(e?E[e]:r["default"])||r["default"];return n&&r.isDate?x(n):n},parseUtcDate:x,confirmedAction:b,UserLayout:c,getCss:(new D).getCSSRule,toWords:function(e){return e.split("__")[0].match(/[A-Z]+[a-z0-9]*/g).join(" ")},toPascalCase:function(e){return e.replace(/(\w)(\w*)/g,function(e,t,r){return t.toUpperCase()+r.toLowerCase()})},format_M_yy:function(e){return e.format("M").substr(0,1)+e.format("-y")},exportToExcel:function(e){var r=t("HTML").find("LINK"),n=r.map(function(){var e=t(this).attr("href"),r=t.ajax(e,{async:!1,dataType:"html"});return r.responseText}).toArray();return e="<HTML><head><style>"+n.join("\n")+"</style></head><body>"+e+"</body></html>",t.ajax({type:"POST",async:!1,dataType:"json",processData:!0,url:KPI.odataUrl+"GetHtmlAsExcel",data:{html:escape(e)},success:function(e){open(KPI.odataUrl+"GetHtml?cacheKey='"+e.d.GetHtmlAsExcel+"'&extention='htm'","_blank")},error:function(e,t,r){alert("exportToExcel:\n"+t)}})},fromODataDate:function(e){return new Date(e).addMinutes(e.getTimezoneOffset())},userSettings:new d,Guid:f,isJQueryObject:function(e){return e.jquery&&!0},makeTemplateAccessor:function(e){var r=e.split("."),n=window;KPI.templates[e]=function(){return e},t.each(r,function(i,a){var o={};o[a]=i==r.length-1?function(){var t=function(){return e};return t.toString=function(){return e},t.url=e,t}():{},t.extend(!0,n,o),n=n[a]})},Math:{linearRegression:function(e,t){var r=0,n=0,i=0,a=0,o=0,s=0,u=0,c=e.length;if(c!=t.length)throw new Error("The parameters values_x and values_y need to have same size!");if(0===c)return[[],[]];for(var l=0;c>l;l++)s=e[l],u=t[l],r+=s,n+=u,a+=s*s,i+=s*u,o++;for(var f=(o*i-r*n)/(o*a-r*r),d=n/o-f*r/o,p=[],g=[],l=0;c>l;l++)s=e[l],u=s*f+d,p.push(s),g.push(u);return[p,g]}},toAbsURL:function(e){var t,r,n,i,a=location;if(/^\w+:/.test(e))return e;if(t=a.protocol+"//"+a.host+(""!=a.port?":"+a.port:""),0==e.indexOf("/"))return t+e;if(r=a.pathname.replace(/\/[^\/]*$/,""),n=e.match(/\.\.\//g))for(e=e.substring(3*n.length),i=n.length;i--;)r=r.substring(0,r.lastIndexOf("/"));return t+r+"/"+e},uuid:new p,loadParents:new h,distinct:function(e,r){var n=[];return t.each(e,function(e,i){0===t.grep(n,function(e){return r(i,e)}).length&&n.push(i)}),n},insertItems:function(e,t,r){r=r||0;var n=[r,0].concat(t);e.splice.apply(e,n)},parseJsonError:function(e){var r=t.parseJSON((e.xhr||{}).message||(e.xhr||e).responseText).error;r||alert("Error!");var n=[r.message.value];if(r=r.innererror)for(n.push(r.message);r&&r.internalexception;)n.push(r.internalexception.message),r=r.internalexception;return n},showJsonError:function(e){alert(t.D.parseJsonError(e).join("\n"))},serverExceptions:function(){var e={};return{register:function(r){var n={};n[r]=r,t.extend(!0,e,n)},isRegistered:function(t){return e.hasOwnProperty(t)}}}(),oData:{parseFromServerDates:a,Filter:l,requestObject:function(e,t,r){return{requestUri:e,method:r||"POST",data:t}},mergeRequestObject:function(e,t){return{requestUri:e,data:t,method:"POST",headers:{"X-HTTP-Method":"MERGE"}}},deleteRequestObject:function(e){return{requestUri:e,data:{},method:"DELETE"}},updateByFilter:function(e,r,n,i,a,o){var s=e.baseUrl||KPI.odataUrl;OData.read(s+e()+"?$filter="+r,function(u){if(u.results.length>1)return t.D.fadingMessage("Filter ["+r+"] must resolve to a single element.",5e3);if(u.results.length>0){var c=u.results[0].__metadata.uri||s+e(u.results[0].Id);OData.request(t.D.oData.mergeRequestObject(c,n),function(e){a&&a(),t.D.successMessage("Update: Success.")})}else OData.request(t.D.oData.requestObject(s+e(),i,"POST"),function(e){o?o(e):t.D.successMessage("Insert Success.")})})},deleteByFilter:function(e,r,n,i){OData.read(e+r()+"?$filter="+n,function(a){if(a.results.length>1)return t.D.fadingMessage("Filter ["+n+"] must resolve to a single element.",5e3);if(a.results.length>0){var o=t.D.prop(a.results[0],"ID"),s=void 0===o?a.results[0].__metadata.uri:e+r(o);OData.request(t.D.oData.deleteRequestObject(s),function(e){(i||t.noop)(),t.D.successMessage("Delete: Success.")})}else alert("Entity "+r()+" where "+n+" not found.")})}},parseDate:i,isMSDate:n,array:{splice:function(e,t){for(var r=[];e.length;)r.push(e.splice(0,t));return r},slice:function(e,t){for(var r=[],n=0;n<bigarray.length;n+=size)r.push(e.slice(n,n+t));return r}},objectName:function(e){return/function\s+(.+)\(/.exec(e.constructor+"")[1]},Loader:g,loader:new g,useDialog:function(e,t,r){2==arguments.length?e.dialog.bind(e)(t):e.dialog.bind(e)(t,r)},dialogOptions:function(e){return t.extend(!0,{autoOpen:!0,resizable:!0,width:"auto",minHeight:55,close:function(r,n){(e||{}).close&&e.close(),t(this).parents("DIV:last").remove()}},e)},fadingMessage:function(e,n,i,a){var o="#F778A1";if(t.isPlainObject(n)){var s=n;n=s.fadingTime,o=s.bgColor||o}a&&a.dialog("close");var u={dialogClass:"noTitle",resizable:!1,minHeight:10,autoOpen:!1},c=t("<DIV class='fadingmessage'></DIV>").html(e).dialog(t.D.dialogOptions(t.extend(u,i)));c.dialog("widget").css("visibility","hidden"),c.dialog("open"),c.dialog("widget").css("visibility","visible");var l=r.once(c.dialog.bind(c,"destroy"));return n!==!1&&0!==n&&(c.dialog("widget").animate({top:"-=100"},n||5e3,function(){t(this).delay(1e3).fadeTo("slow",.25,"swing",l)}),c.animate({backgroundColor:o,color:"#FFFFFF"},(n||5e3)/10)),c.dialog("widget").click(l),c},successMessage:function(e,t,r,n){this.fadingMessage(e,{fadingTime:t,bgColor:"#79CF51"},r,n)},makeDialog:function(e,n){var i=t("<DIV></DIV>").html(e).dialog(t.D.dialogOptions(n)),a=i.dialog.bind(i,"option"),o=r.debounce(function(){try{a("autoReposition")&&a("position",a("position"))}catch(e){}},500);return i.removeResize&&i.resize(o).on("dialogclose",function(){i.removeResize(o)}),i},makeErrorDialog:function(e,r){return t.D.makeDialog("<PRE>"+t.D.oDataErrorToString(e)+"</PRE>",r)},showDialog:function(e,t){e.html(t),e.dialog("isOpen")||(e.dialog("open"),e.dialog("option","position","center"))},oDataErrorToString:function(r){function n(e){if(0==(e+"").replace(/^\s+|\s+$/g,"").indexOf("{"))try{return t.parseJSON(e)}catch(r){try{return t.parseJSON(e.replace(/\{\s+"d"\s+:\s{\s+"results":\s+\[\s+\{/,""))}catch(r){return null}}return null}function i(e){return e.replace("\\r\\n","\n").replace(/",\s"/g,'",\n').replace(/The transaction ended in the trigger. The batch has been aborted./g,"").replace(/An error occurred while processing this request.\n/g,"").replace(/An error occurred while executing the command definition. See the inner exception for details.\n/g,"")}function a(e){f.push(e.message.value);var t=e.innererror;if(t){f.push(t.message);for(var r=t.internalexception;r;r=r.internalexception)f.push(r.message)}}if("string"==typeof r)return r;var o=((r[0]||{}||{}).item||{})._entityState;if(o)return t.map(r[0].errors,function(e){return e.Message+"\n"+e.PropertyDefinition.name+" is "+e.Type}).join("\n");var s=null;if(r.responseText&&(s=n(r.responseText),!s))return r.responseText;if("undefined"!=typeof TypeError&&r instanceof TypeError)return r+"";if("undefined"!=typeof Exception&&r instanceof Exception){if(!r.data||t.isArray(r.data)&&0==r.data.length)return r.message;r=r.data[0]||r.data}try{if(t.isArray(r.xhr)){try{var u=r.xhr[0].errors[0]}catch(c){}if("ValidationError"==t.D.objectName(u)){var l={};return l[u.Message]=u.PropertyDefinition,[e.utils.stringifyJson(l).replace(":",":\n")]}}var f=[t.D.propDeep(r,"requestUri")];if(s)a(s.error);else{var d=t.D.deepPath(r,"response.body");if(s=(n(d)||{})["odata.error"])a(s);else{try{var p,d=t.D.propDeep(r.response||r,"body");if(d)p=n(d)||d;else{var g=n(t.D.propDeep(r,"message"));p=g}if(p){var h=(p.error||{}).innerError||p.error,m=t.Linq.last((((h||{}).innererror||{}).type||"").split("."));return m&&t.D.serverExceptions.isRegistered(m)?i(h.innererror.message):(a(h),i(f.join("\n")))}}catch(c){r.response||(r=t.D.propDeep(r,"data")||t.D.propDeep(r,"xhr"),r=r[0]||r)}var v=t.D.propDeep(r,"response");if(!v){var y=(r.hasOwnProperty("readyState")&&r.hasOwnProperty("status")&&r.hasOwnProperty("statusText")&&r.hasOwnProperty("responseText"),JSON.stringify({url:r.url,statusText:r.statusText,responseText:r.responseText},null,2));return y}var p=v.body||t.D.propDeep(r,"message")||t.D.propDeep(r,"body"),D=p.indexOf("<html")>=0;if(D)f.push(p);else try{var b=(n(p)||{}).error;b?a(b):f.push(r.response.statusText)}catch(c){}}}return i(f.join("\n"))}catch(c){try{var f=e.utils.stringifyJson(r);return i(f)}catch(c){return"Some kind of error just hapened to me.\nI am going to lay down for a while.\n"+c}}return e.utils.stringifyJson(r.response).replace(/\\r\\n/g,"<br/>").replace(/\\\\r\\\\n/g,"<br/>").replace(/\\"/g,'"')},oDataErrorToString_:function(e){function r(e){return e.replace("\\r\\n","\n").replace(/",\s"/g,'",\n').replace(/An error occurred while processing this request./g,"").replace(/The transaction ended in the trigger. The batch has been aborted./g,"")}if("string"==typeof e)return e;var n=[e.response.requestUri];try{var i=t.parseJSON(e.response.body),a=(i.error||{}).innerError||i.error,o=t.Linq.last((((a||{}).innererror||{}).type||"").split("."));if(o&&t.D.serverExceptions.isRegistered(o))return r(a.innererror.message)}catch(s){e.response.statusCode>=400&&n.push(e.response.body)}try{var u=(t.parseJSON(e.response.body)||{}).error;if(u){n.push(u.message.value);var c=u.innererror;if(c){n.push(c.message);for(var l=c.internalexception;l;l=l.internalexception)n.push(l.message)}}else n.push(e.response.statusText)}catch(s){}return r(n.join("\n"))},parseOdataBatchError:function(t,r){function n(e){var t=e["odata.error"];return t?[t.message.value,t.innererror.message,t.innererror.type]:[]}for(var i=0;i<t.__batchResponses.length;i++)for(var a=t.__batchResponses[i],o=0;o<a.__changeResponses.length;o++){var s=a.__changeResponses[o],u=parseInt(s.statusCode||(s.response||{}).statusCode);if(!isNaN(u)&&!(400>u)&&s.message){var c=e.utils.parseJson(s.response.body),l=[];if("string"==typeof s.message&&l.push(s.message),c)if(c.error){l.push(c.error.message.value);var f=c.error.innererror}else l=l.concat(n(c));for(;f;)l.push(f.message),f=f.internalexception;return l}}},toODataDate:s,odataParam:function(e,r){return"undefined"==typeof e?e:null===e?"null":e.isGuid?o(e+""):"string"==typeof e?e.isGuid&&o(e)||"'"+escape(e)+"'":t.D.isDate(e)?u(e,r):e},odataParamsQuery:function(e){return t.each(e,function(r,n){"undefined"!=typeof n&&null!==n&&(e[r]=t.D.odataParam(n))}),t.map(e,function(e,t){return"undefined"!=typeof e&&null!==e?t+"="+escape(e):void 0})},odataFIlterQuery:function(e){return t.map(e,function(e,t){return"undefined"!=typeof e.value&&null!==e.value?e:void 0}).join(" and ")},inRange:function(e,t,r){return t>e?t:e>r?r:e},round:function(e,t){return t>=0?parseFloat(e.toFixed(t)):e},gradient:function(e,r,n,i,a,o,s){function u(e,r,n,i,a,o){for(var u=[e,r,n],c=[],l=0;o>=l;l++){var f=i+h*l,d=(f-i)/(a-i),p=[];t.each(u,function(e,t){var r=0==t[1]&&0==t[0]?0:d*(t[1]-t[0])+t[0];p.push(Math.round(r))}),c.push({value:t.D.round(f,s),rgb:p})}return c}var c=[e[0],e[1]],l=[r[0],r[1]],f=[n[0],n[1]],d=[c[1],e[2]],p=[l[1],r[2]],g=[f[1],n[2]],h=(a-i)/(o-1),m=i+(a-i)/2,v=u(c,l,f,i,m,o/2),y=u(d,p,g,m,a,o/2);return v.concat(y)},props:function(r){return t.each(t.makeArray(arguments).slice(1),function(t,n){n=n.toLowerCase();for(var i in r)i.toLowerCase()==n&&(r=e.utils.unwrapObservable(r[i]))}),r},prop:function(e,t){t=t.toLowerCase();for(var r in e)if(r.toLowerCase()==t)return e[r]},deepPath:function(e,t){for(var r=t.split("."),n=0;n<r.length;n++){if(!e.hasOwnProperty(r[n]))return;e=e[r[n]]}return e},propDeep:function(e,r,n){if(2==arguments.length&&(n=5),n-->=0&&"object"==typeof e&&!t.isEmptyObject(e)){r=r.toLowerCase();for(var i in e)if(i.toLowerCase()==r)return e[i];for(var i in e){var a=t.D.propDeep(e[i],r,n);if(void 0!==a)return a}}},sure:function(e,r,n){if(1==arguments.length)return e?function(){return 0==arguments.length?e:t.D.sure.apply(null,[e].concat(Array.prototype.slice.call(arguments,0)))}:null;if(t.isPlainObject(r)){var i=r.error;r=r.name}var a=t.D.name(e,r,i);return!a&&i?i(e,r):2==arguments.length?e[a]:e[a]=n},name:y,isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},parseISO8601Date:function(e){var t=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,r=[];if(r=e.match(t),!r)throw"Couldn't parse ISO 8601 date string '"+e+"'";var n=[1,2,3,4,5,6,10,11];for(var i in n)r[n[i]]=parseInt(r[n[i]],10);r[7]=parseFloat(r[7]);var a=Date.UTC(r[1],r[2]-1,r[3],r[4],r[5],r[6]);if(r[7]>0&&(a+=Math.round(1e3*r[7])),"Z"!=r[8]&&r[10]){var o=60*r[10]*60*1e3;r[11]&&(o+=60*r[11]*1e3),"-"==r[9]?a-=o:a+=o}return new Date(a)},jayData:{init:m,reRequire:function(e,r){function n(e,r){t.D.jayData.makeRequired(e,r,!0),e.addEventListener("beforeCreate",function(n,i,a){t.D.jayData.makeRequired(e,r,!1)}),e.addEventListener("afterCreate",function(n,i,a){t.D.jayData.makeRequired(e,r,!0)})}t.isArray(r)||(r=[r]),t.each(r,function(t,r){n(e,r)})},memberDefinition:v,required:function(e,t,r){return v(e,t,"required",r)},computed:function(e,t,r){return v(e,t,"computed",r)},makeRequired:function(e,t,r){return arguments.length>1&&t?(e instanceof $data.Queryable&&(e=e.defaultType),t=e.field?e.field(t):e.elementType.field(t)):t=e,arguments.length<3?t.memberDefinition.required:(t.memberDefinition.required=void 0===r||r,t)},makeComputed:function(e,t,r){return arguments.length>1&&t?(e instanceof $data.Queryable&&(e=e.defaultType),t=e.field?e.field(t):e.elementType.field(t)):t=e,arguments.length<3?t.memberDefinition.required:(t.memberDefinition.computed=void 0===r||r,t)},kendo:{lookUp:{map:S,fetch:T}}}};t.extend(!0,t.D,C);var P=new function(){this.filter=function(e,t,r){return{field:e,operator:t,value:r}},this.charts={font:function(e,t){return(t?"bold":"")+" "+(e||12)+"px  Arial,Helvetica,sans-serif"},series:function(e,r,n){return t.extend(!0,{type:e,data:r},n)},categories:function(e,r,n){return t.extend(!0,{baseUnit:e,categories:r},n)},title:function(e,r){return t.extend(!0,{text:e,padding:0,margin:0,font:"bold 12px Arial",position:"top"},r)}},this.templates={rightAlignedField:function(e,r,n){return t.extend(!0,{field:e,template:t.D.kendo.templates.rightAligned(e,r)},n)},rightAligned:function(e,t){return'<div style="text-align:right">#=kendo.toString('+e+",'"+t+"')#</div>"}},this.foreignFieldFactory=function(e,r,n){function i(e,r,n,i,a){return function(o,s){t('<select data-role="dropdownlist" style="margin:0px;width:100%" data-bind="value:'+e+'">').appendTo(o).kendoDropDownList({change:a||function(e,t,r){this._data()[this.selectedIndex]},autobind:!1,dataValueField:n,dataTextField:i,dataSource:r})}}return{field:e(),editor:i(e(),r,"value","text"),template:n}},this.getGridState=function(e){return{columns:e.columns.filter(function(e){return!e.command}),sort:e.dataSource.sort(),filter:e.dataSource.filter()}},this.syncGridColumnsUI=function(e,r){var n=t.Linq.toDictionary(e,"field");r.columns.forEach(function(e,t){var i=n[e.field];i&&i.hidden?r.hideColumn(t):r.showColumn(t)})},this.shiftIdColumns=function(e,t){function r(e){return/ID$/.test(e.field)}function n(e){return!r(e)}var i=e.filter(n);return t?i:i.concat(e.filter(r))}};t.extend(!0,t.D,{kendo:{}}),t.extend(!0,t.D.kendo,P)}"function"==typeof define&&define.amd?define(["ko","jquery","underscore","jquery-ui","jquery.extentions.Linq","jquery.extentions.fn","JSON.prune","kendo"],function(t,r){e(t||require("knockout"),r,_)}):e(ko,$,_)}();