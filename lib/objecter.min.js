define(["ko","jquery","underscore"],function(r,n,e){function t(u,a,f){if(1==arguments.length)return u?function(){return 0==arguments.length?u:t.apply(null,[u].concat(Array.prototype.slice.call(arguments,0)))}:null;if(n.isPlainObject(a)){var s=a.error;a=a.name}var p=o(u,a,!1);if(!p){var c=i(u,a);if(void 0!==s)return e.isFunction(s)?s(u,a,c):s;throw new Error(c)}return 2==arguments.length?!r.isObservable(u[p])&&n.isFunction(u[p])?u[p].bind(u):u[p]:u[p]=f}function o(r,e,t){if(!r)throw new Error("Object is empty");if(1==arguments.length)return function(e){return 0==arguments.length?n.map(r,function(r,n){return n}):o(r,e)};if(e=e?e.toLowerCase():e)for(var u in r)if(u.toLowerCase()==e)return u;if(t)throw new Error(i(r,e));return!1}function i(r,n){return"Property ["+n+"] not found in "+(JSON.prune?JSON.prune(r,1,10):JSON.stringify(r))}function u(r,n){for(var e=n.split("."),t=[],o=0;o<e.length;o++){if(!r.hasOwnProperty(e[o]))return t;r=r[e[o]]}return t.push(r),t}function a(r,e,t){if(2==arguments.length&&(t=5),t-->=0&&"object"==typeof r&&!n.isEmptyObject(r)){e=e.toLowerCase();for(var o in r)if(o.toLowerCase()==e)return r[o];for(var o in r){var i=n.D.propDeep(r[o],e,t);if(void 0!==i)return i}}}return{sure:t,name:o,deepPath:u,propDeep:a}});