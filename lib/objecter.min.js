define(["jquery","underscore"],function(r,n){function e(n,o,i){if(1==arguments.length)return n?function(){return 0==arguments.length?n:e.apply(null,[n].concat(Array.prototype.slice.call(arguments,0)))}:null;if(r.isPlainObject(o)){var a=o.error;o=o.name}var f=t(n,o,!1);return!f&&a?a(n,o,u(n,o)):2==arguments.length?n[f]:n[f]=i}function t(n,e,o){if(!n)throw new Error("Object is empty");if(1==arguments.length)return function(e){return 0==arguments.length?r.map(n,function(r,n){return n}):t(n,e)};if(e=e?e.toLowerCase():e)for(var i in n)if(i.toLowerCase()==e)return i;if(o)throw new Error(u(n,e));return!1}function u(r,n){return"Property ["+n+"] not found in "+(JSON.prune?JSON.prune(r,1,10):JSON.stringify(r))}return{sure:e}});