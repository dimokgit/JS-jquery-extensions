define(["ko","jquery"],function(r,n){function e(o,u,a){if(1==arguments.length)return o?function(){return 0==arguments.length?o:e.apply(null,[o].concat(Array.prototype.slice.call(arguments,0)))}:null;if(n.isPlainObject(u)){var f=u.error;u=u.name}var s=t(o,u,!1);if(!s){var c=i(o,u);if(void 0!==f)return _.isFunction(f)?f(o,u,c):f;throw new Error(c)}return 2==arguments.length?!r.isObservable(o[s])&&n.isFunction(o[s])?o[s].bind(o):o[s]:o[s]=a}function t(r,e,o){if(!r)throw new Error("Object is empty");if(1==arguments.length)return function(e){return 0==arguments.length?n.map(r,function(r,n){return n}):t(r,e)};if(e=e?e.toLowerCase():e)for(var u in r)if(u.toLowerCase()==e)return u;if(o)throw new Error(i(r,e));return!1}function i(r,n){return"Property ["+n+"] not found in "+(JSON.prune?JSON.prune(r,1,10):JSON.stringify(r))}function o(r){var n=[];return n.push(r),n}function u(r,n){for(var e=n.split("."),t=0;t<e.length;t++){if(!r.hasOwnProperty(e[t]))return[];r=r[e[t]]}return o(r)}function a(r,e,t){if(2==arguments.length&&(t=5),t-->=0&&"object"==typeof r&&!n.isEmptyObject(r)){e=e.toLowerCase();for(var i in r)if(i.toLowerCase()==e)return o(r[i]);for(var i in r){var u=a(r[i],e,t);if(void 0!==u)return o(u)}}return[]}return{sure:e,name:t,deepPath:u,propDeep:a}});