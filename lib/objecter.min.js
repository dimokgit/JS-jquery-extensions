define(["jquery","underscore"],function(r,n){function e(i,o,a){if(1==arguments.length)return i?function(){return 0==arguments.length?i:e.apply(null,[i].concat(Array.prototype.slice.call(arguments,0)))}:null;if(r.isPlainObject(o)){var f=o.error;o=o.name}var c=t(i,o,!1);if(!c){var s=u(i,o);if(void 0!==f)return n.isFunction(f)?f(i,o,s):f;throw new Error(s)}return 2==arguments.length?i[c]:i[c]=a}function t(n,e,i){if(!n)throw new Error("Object is empty");if(1==arguments.length)return function(e){return 0==arguments.length?r.map(n,function(r,n){return n}):t(n,e)};if(e=e?e.toLowerCase():e)for(var o in n)if(o.toLowerCase()==e)return o;if(i)throw new Error(u(n,e));return!1}function u(r,n){return"Property ["+n+"] not found in "+(JSON.prune?JSON.prune(r,1,10):JSON.stringify(r))}return{sure:e,name:t}});